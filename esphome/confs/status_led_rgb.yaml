############################################
#  STATUS LED â€“ ATOM S3 LITE (GPIO 35)
############################################

light:
  - platform: esp32_rmt_led_strip
    id: led
    name: Status LED
    internal: true
    pin: 35
    num_leds: 1
    chipset: ws2812
    rgb_order: grb
    restore_mode: RESTORE_DEFAULT_OFF

    effects:
      - pulse:
          name: slow_pulse
          transition_length: 1s
          update_interval: 1s
      - pulse:
          name: fast_pulse
          transition_length: 0.3s
          update_interval: 0.3s


esphome:
  on_boot:
    priority: -10
    then:
      - light.turn_on:
          id: led
          red: 100%
          green: 100%
          blue: 100%
          brightness: 100%
          effect: none


wifi:
  on_connect:
    then:
      - light.turn_on:
          id: led
          red: 100%
          green: 100%
          blue: 100%
          effect: none

  on_disconnect:
    then:
      - light.turn_on:
          id: led
          red: 100%
          green: 0%
          blue: 0%
          effect: fast_pulse

  on_ap_start:
    then:
      - light.turn_on:
          id: led
          red: 100%
          green: 100%
          blue: 100%
          effect: slow_pulse


api:
  on_client_disconnected:
    then:
      - light.turn_on:
          id: led
          red: 100%
          green: 100%
          blue: 0%
          effect: fast_pulse


script:
  - id: heating
    then:
      - light.turn_on:
          id: led
          red: 100%
          green: 65%
          blue: 0%
          brightness: 100%
          effect: none

  - id: cooling
    then:
      - light.turn_on:
          id: led
          red: 0%
          green: 0%
          blue: 100%
          brightness: 100%
          effect: none

  - id: hotwater
    then:
      - light.turn_on:
          id: led
          red: 100%
          green: 0%
          blue: 100%
          brightness: 100%
          effect: none


number:
  - platform: template
    id: led_brightness
    name: LED Brightness
    icon: mdi:toggle-switch-variant
    mode: slider
    entity_category: config
    optimistic: true
    min_value: 0
    max_value: 100
    step: 10
    initial_value: 70
    restore_value: true
    unit_of_measurement: "%"
    on_value:
      then:
        - if:
            condition:
              light.is_on:
                id: led
            then:
              - light.turn_on:
                  id: led
                  brightness: !lambda 'return x / 100.0;'


